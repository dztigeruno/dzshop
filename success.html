<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>تم تأكيد الطلب - POTI PATI</title>
    
    <!-- Bootstrap 5.3 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Font Awesome 6 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="assets/css/style.css">
</head>
<body>
    <!-- Language Switcher -->
    <div class="language-switcher bg-primary text-white py-2">
        <div class="container">
            <div class="d-flex justify-content-between align-items-center">
                <div class="d-flex align-items-center">
                    <i class="fas fa-globe me-2"></i>
                    <span data-translate="language">اللغة</span>
                </div>
                <div class="btn-group" role="group">
                    <button type="button" class="btn btn-light btn-sm lang-btn active" data-lang="ar">
                        <img src="https://flagcdn.com/w20/dz.png" alt="العربية" class="me-1">
                        العربية
                    </button>
                    <button type="button" class="btn btn-outline-light btn-sm lang-btn" data-lang="fr">
                        <img src="https://flagcdn.com/w20/fr.png" alt="Français" class="me-1">
                        Français
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm sticky-top">
        <div class="container">
            <a class="navbar-brand fw-bold text-primary" href="index.html">
                <i class="fas fa-shopping-bag me-2"></i>POTI PATI
            </a>
            
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="index.html" data-translate="home">الرئيسية</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="product.html" data-translate="product">المنتج</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="order.html" data-translate="order">الطلب</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="about.html" data-translate="about">من نحن</a>
                    </li>
                </ul>
                
                <div class="d-flex align-items-center">
                    <a href="admin/login.html" class="btn btn-primary" data-translate="admin">لوحة التحكم</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Success Section -->
    <section class="py-5 bg-light min-vh-100 d-flex align-items-center">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-8">
                    <div class="text-center mb-5">
                        <!-- Success Animation -->
                        <div class="success-animation mb-4">
                            <div class="success-circle mx-auto mb-4">
                                <i class="fas fa-check"></i>
                            </div>
                        </div>
                        
                        <h1 class="display-5 fw-bold text-success mb-3">تم تأكيد طلبك بنجاح!</h1>
                        <p class="lead text-muted mb-4">
                            شكراً لك! تم استلام طلبك وسيتم التواصل معك قريباً لتأكيد تفاصيل التوصيل
                        </p>
                        
                        <!-- Order Number -->
                        <div class="order-number-card bg-white rounded-4 shadow-3d p-4 mb-4">
                            <h3 class="text-primary mb-2">رقم الطلب</h3>
                            <p class="fs-1 fw-bold text-primary mb-0" id="orderNumber">PP-2024-001</p>
                            <small class="text-muted">يرجى الاحتفاظ بهذا الرقم لمتابعة طلبك</small>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="row justify-content-center">
                <div class="col-lg-10">
                    <div class="row g-4">
                        <!-- Order Details -->
                        <div class="col-lg-8">
                            <div class="card border-0 shadow-3d">
                                <div class="card-header bg-primary text-white">
                                    <h5 class="mb-0">
                                        <i class="fas fa-info-circle me-2"></i>
                                        تفاصيل الطلب
                                    </h5>
                                </div>
                                <div class="card-body">
                                    <div id="orderDetails">
                                        <!-- Order details will be loaded here -->
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Next Steps -->
                        <div class="col-lg-4">
                            <div class="card border-0 shadow-3d">
                                <div class="card-header bg-secondary text-white">
                                    <h5 class="mb-0">
                                        <i class="fas fa-route me-2"></i>
                                        الخطوات التالية
                                    </h5>
                                </div>
                                <div class="card-body">
                                    <div class="next-steps">
                                        <div class="step-item mb-3">
                                            <div class="d-flex align-items-center">
                                                <div class="step-icon bg-primary text-white rounded-circle me-3">
                                                    <i class="fas fa-phone"></i>
                                                </div>
                                                <div>
                                                    <h6 class="mb-1">التواصل معنا</h6>
                                                    <small class="text-muted">خلال 24 ساعة</small>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="step-item mb-3">
                                            <div class="d-flex align-items-center">
                                                <div class="step-icon bg-secondary text-white rounded-circle me-3">
                                                    <i class="fas fa-truck"></i>
                                                </div>
                                                <div>
                                                    <h6 class="mb-1">تأكيد التوصيل</h6>
                                                    <small class="text-muted">2-5 أيام عمل</small>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="step-item mb-3">
                                            <div class="d-flex align-items-center">
                                                <div class="step-icon bg-success text-white rounded-circle me-3">
                                                    <i class="fas fa-box"></i>
                                                </div>
                                                <div>
                                                    <h6 class="mb-1">استلام الطلب</h6>
                                                    <small class="text-muted">ادفع عند الاستلام</small>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Contact Card -->
                            <div class="card border-0 shadow-3d mt-4">
                                <div class="card-body text-center">
                                    <h6 class="fw-bold mb-3">تحتاج مساعدة؟</h6>
                                    <div class="d-grid gap-2">
                                        <a href="tel:+213555123456" class="btn btn-outline-primary">
                                            <i class="fas fa-phone me-2"></i>
                                            اتصل بنا
                                        </a>
                                        <a href="https://wa.me/213555123456" target="_blank" class="btn btn-success">
                                            <i class="fab fa-whatsapp me-2"></i>
                                            واتساب
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Action Buttons -->
                    <div class="text-center mt-5">
                        <div class="d-flex flex-wrap justify-content-center gap-3">
                            <a href="index.html" class="btn btn-primary btn-lg">
                                <i class="fas fa-home me-2"></i>
                                العودة للرئيسية
                            </a>
                            <a href="product.html" class="btn btn-secondary btn-lg">
                                <i class="fas fa-shopping-bag me-2"></i>
                                مواصلة التسوق
                            </a>
                            <button onclick="printOrder()" class="btn btn-outline-primary btn-lg">
                                <i class="fas fa-print me-2"></i>
                                طباعة الطلب
                            </button>
                        </div>
                    </div>
                    
                    <!-- Social Sharing -->
                    <div class="text-center mt-4">
                        <p class="text-muted mb-3">شارك خبر نجاحك!</p>
                        <div class="d-flex justify-content-center gap-3">
                            <button onclick="shareOrder('facebook')" class="btn btn-outline-primary">
                                <i class="fab fa-facebook me-2"></i>
                                فيسبوك
                            </button>
                            <button onclick="shareOrder('twitter')" class="btn btn-outline-info">
                                <i class="fab fa-twitter me-2"></i>
                                تويتر
                            </button>
                            <button onclick="shareOrder('whatsapp')" class="btn btn-outline-success">
                                <i class="fab fa-whatsapp me-2"></i>
                                واتساب
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-dark text-white py-5">
        <div class="container">
            <div class="row g-4">
                <div class="col-lg-4">
                    <h5 class="fw-bold mb-3">
                        <i class="fas fa-shopping-bag me-2 text-primary"></i>POTI PATI
                    </h5>
                    <p>متجرك الإلكتروني الأول للتسوق الآمن في الجزائر</p>
                </div>
                <div class="col-lg-2">
                    <h6 class="fw-bold mb-3">روابط سريعة</h6>
                    <ul class="list-unstyled">
                        <li><a href="index.html" class="text-light text-decoration-none">الرئيسية</a></li>
                        <li><a href="product.html" class="text-light text-decoration-none">المنتج</a></li>
                        <li><a href="about.html" class="text-light text-decoration-none">من نحن</a></li>
                    </ul>
                </div>
                <div class="col-lg-3">
                    <h6 class="fw-bold mb-3">معلومات التواصل</h6>
                    <ul class="list-unstyled">
                        <li class="mb-2">
                            <i class="fas fa-phone me-2 text-primary"></i>
                            +213 555 123 456
                        </li>
                        <li class="mb-2">
                            <i class="fas fa-envelope me-2 text-primary"></i>
                            info@potipati.dz
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </footer>

    <!-- Bootstrap 5.3 JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Custom JS -->
    <script src="assets/js/main.js"></script>

    <!-- Success Page JS -->
    <script>
        let currentOrder = null;
        let orderNumber = '';

        // Initialize success page
        document.addEventListener('DOMContentLoaded', function() {
            loadOrderData();
            generateOrderNumber();
            displayOrderDetails();
            animateSuccess();
        });

        function loadOrderData() {
            const orderData = localStorage.getItem('currentOrder');
            if (orderData) {
                currentOrder = JSON.parse(orderData);
            } else {
                // Redirect to home if no order data
                window.location.href = 'index.html';
            }
        }

        function generateOrderNumber() {
            // Generate unique order number
            const timestamp = Date.now().toString().slice(-6);
            const random = Math.floor(Math.random() * 1000).toString().padStart(3, '0');
            orderNumber = `PP-${new Date().getFullYear()}-${timestamp}${random}`;
            
            document.getElementById('orderNumber').textContent = orderNumber;
        }

        function displayOrderDetails() {
            if (!currentOrder) return;

            const orderDetails = document.getElementById('orderDetails');
            const product = currentOrder.product;
            
            orderDetails.innerHTML = `
                <!-- Customer Info -->
                <div class="order-section mb-4">
                    <h6 class="fw-bold text-primary mb-3">معلومات العميل</h6>
                    <div class="row g-2">
                        <div class="col-sm-6">
                            <strong>الاسم:</strong> ${currentOrder.customer.firstName} ${currentOrder.customer.lastName}
                        </div>
                        <div class="col-sm-6">
                            <strong>الهاتف:</strong> ${currentOrder.customer.phone}
                        </div>
                        ${currentOrder.customer.email ? `<div class="col-12"><strong>البريد:</strong> ${currentOrder.customer.email}</div>` : ''}
                    </div>
                </div>

                <!-- Delivery Info -->
                <div class="order-section mb-4">
                    <h6 class="fw-bold text-primary mb-3">معلومات التوصيل</h6>
                    <div class="row g-2">
                        <div class="col-sm-6">
                            <strong>الولاية:</strong> ${currentOrder.delivery.wilaya}
                        </div>
                        <div class="col-sm-6">
                            <strong>البلدية:</strong> ${currentOrder.delivery.commune}
                        </div>
                        <div class="col-12">
                            <strong>العنوان:</strong> ${currentOrder.delivery.address}
                        </div>
                        ${currentOrder.delivery.deliveryTime ? `<div class="col-12"><strong>وقت التوصيل:</strong> ${currentOrder.delivery.deliveryTime === 'morning' ? 'صباحاً (9ص - 12م)' : currentOrder.delivery.deliveryTime === 'afternoon' ? 'بعد الظهر (12م - 6م)' : 'مساءً (6م - 9م)'}</div>` : ''}
                    </div>
                </div>

                <!-- Product Info -->
                <div class="order-section mb-4">
                    <h6 class="fw-bold text-primary mb-3">المنتج المطلوب</h6>
                    <div class="d-flex">
                        <img src="${product.image}" alt="${product.name}" 
                             class="rounded me-3" style="width: 80px; height: 80px; object-fit: cover;">
                        <div class="flex-grow-1">
                            <h6 class="mb-1">${product.name}</h6>
                            <small class="text-muted">
                                ${product.variants.color ? 'اللون: ' + product.variants.color + ' | ' : ''}
                                ${product.variants.storage ? 'التخزين: ' + product.variants.storage + ' | ' : ''}
                                ${product.variants.ram ? 'الذاكرة: ' + product.variants.ram : ''}
                            </small>
                            <div class="d-flex justify-content-between align-items-center mt-2">
                                <span>الكمية: ${product.quantity}</span>
                                <span class="fw-bold">${(product.price * product.quantity).toLocaleString()} د.ج</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Payment & Total -->
                <div class="order-section">
                    <h6 class="fw-bold text-primary mb-3">ملخص الدفع</h6>
                    <div class="summary-item">
                        <span>سعر المنتج</span>
                        <span>${(product.price * product.quantity).toLocaleString()} د.ج</span>
                    </div>
                    <div class="summary-item">
                        <span>رسوم التوصيل</span>
                        <span>${currentOrder.shippingCost === 0 ? 'مجاني' : currentOrder.shippingCost.toLocaleString() + ' د.ج'}</span>
                    </div>
                    <div class="summary-item fw-bold border-top pt-2">
                        <span>المجموع الكلي</span>
                        <span class="text-primary">${currentOrder.total.toLocaleString()} د.ج</span>
                    </div>
                    <div class="alert alert-info mt-3">
                        <i class="fas fa-money-bill-wave me-2"></i>
                        <strong>طريقة الدفع:</strong> دفع عند الاستلام
                    </div>
                </div>
            `;
        }

        function animateSuccess() {
            // Animate success circle
            const successCircle = document.querySelector('.success-circle');
            successCircle.style.transform = 'scale(0)';
            
            setTimeout(() => {
                successCircle.style.transition = 'transform 0.6s ease-out';
                successCircle.style.transform = 'scale(1)';
            }, 300);

            // Add checkmark animation
            setTimeout(() => {
                const checkmark = successCircle.querySelector('i');
                checkmark.style.opacity = '0';
                checkmark.style.transform = 'scale(0.5)';
                
                setTimeout(() => {
                    checkmark.style.transition = 'all 0.4s ease-out';
                    checkmark.style.opacity = '1';
                    checkmark.style.transform = 'scale(1)';
                }, 200);
            }, 600);
        }

        function printOrder() {
            window.print();
        }

        function shareOrder(platform) {
            const text = `تم تأكيد طلبي في POTI PATI! رقم الطلب: ${orderNumber}`;
            const url = window.location.href;
            
            switch(platform) {
                case 'facebook':
                    window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(url)}&quote=${encodeURIComponent(text)}`, '_blank');
                    break;
                case 'twitter':
                    window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(url)}`, '_blank');
                    break;
                case 'whatsapp':
                    window.open(`https://wa.me/?text=${encodeURIComponent(text + ' ' + url)}`, '_blank');
                    break;
            }
        }

        // Add success animations CSS
        const style = document.createElement('style');
        style.textContent = `
            .success-animation {
                animation: bounceIn 1s ease-out;
            }
            
            .success-circle {
                width: 120px;
                height: 120px;
                background: linear-gradient(135deg, var(--success-color), #20c997);
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                color: white;
                font-size: 3rem;
                box-shadow: var(--shadow-3d);
                transition: all 0.6s ease-out;
            }
            
            .order-number-card {
                transition: all 0.3s ease;
            }
            
            .order-number-card:hover {
                transform: translateY(-5px);
            }
            
            .step-icon {
                width: 40px;
                height: 40px;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 1rem;
            }
            
            @keyframes bounceIn {
                0% {
                    transform: scale(0.3);
                    opacity: 0;
                }
                50% {
                    transform: scale(1.05);
                    opacity: 0.8;
                }
                70% {
                    transform: scale(0.9);
                    opacity: 1;
                }
                100% {
                    transform: scale(1);
                    opacity: 1;
                }
            }
            
            @media print {
                .navbar,
                .language-switcher,
                .btn,
                .whatsapp-float {
                    display: none !important;
                }
                
                body {
                    background: white !important;
                }
                
                .card {
                    box-shadow: none !important;
                    border: 1px solid #ccc !important;
                }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>